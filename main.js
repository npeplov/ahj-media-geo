!function(){"use strict";var t={814:function(t,e,i){t.exports=i.p+"./license.txt"}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var u=e[n]={exports:{}};return t[n](u,u.exports,i),u.exports}i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),function(){var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t}(),function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}new(function(){function e(i){t(this,e),this.gui=i,this.text=null,this.latitude=null,this.longitude=null,this.notes=[],this.sendGPS=this.sendGPS.bind(this)}return n(e,[{key:"init",value:function(){var t=this;this.gui.chatForm.addEventListener("submit",(function(e){return t.sendTextNote(e)})),this.gui.modal.addEventListener("submit",(function(e){return t.sendGPS(e)})),this.gui.modal.addEventListener("input",(function(e){return t.checkGPS(e)}))}},{key:"checkGPS",value:function(t){t&&t.preventDefault();var e=[/^\[{0,}-{0,1}\d{1,3}\.\d{5},\s{0,}-{0,1}\d{1,3}\.\d{5}\]{0,}$/,"Mismatch pattern"];return e[0].test(this.gui.modalInput.value)?(this.gui.modalInput.setCustomValidity(""),this.gui.modalTooltip.innerText="",!0):(this.gui.modalInput.setCustomValidity(e[1]),this.gui.modalTooltip.innerText=e[1],!1)}},{key:"sendGPS",value:function(t){if(t&&t.preventDefault(),this.checkGPS(t)){var e=/-{0,1}\d{1,3}\.\d{5}/g,i=this.gui.modalInput.value.match(e)[0],n=this.gui.modalInput.value.match(e)[1],o=this.text;this.notes.push({text:o,latitude:i,longitude:n}),this.showPosts(),this.gui.modal.classList.add("hidden"),this.gui.modalInput.value="",this.text=null}}},{key:"sendTextNote",value:function(t){var e=this;if(t.preventDefault(),""!==this.gui.postInput.value){var i=this.gui.postInput.value;this.text=this.gui.postInput.value,this.showPosts(),this.getlocation().then((function(t){var n=t.coords.latitude.toFixed(5),o=t.coords.longitude.toFixed(5);e.notes.push({text:i,latitude:n,longitude:o}),e.showPosts(),e.gui.postList.scrollTo(0,0)})).catch((function(){e.gui.modal.classList.remove("hidden"),e.gui.modalInput.focus()})),this.gui.postInput.value=""}}},{key:"getlocation",value:function(t){return new Promise((function(e,i){navigator.geolocation.getCurrentPosition(e,i,t)}))}},{key:"showPosts",value:function(){this.gui.postList.innerHTML="";for(var t=this.notes.length-1;t>=0;t-=1)this.gui.postList.innerHTML+=this.gui.textNoteTeplate(this.notes[t])}}]),e}())(new(function(){function e(){t(this,e),this.widget=document.querySelector(".widget"),this.chat=document.querySelector(".chat"),this.chatForm=document.querySelector(".chat form"),this.postList=document.querySelector(".conversations"),this.postInput=this.chatForm.querySelector("input"),this.modal=this.widget.querySelector(".modal"),this.modalInput=this.modal.querySelector("input"),this.modalTooltip=this.modal.querySelector(".tooltip")}return n(e,[{key:"textNoteTeplate",value:function(t){var e=t.text,i=t.latitude,n=t.longitude;return"\n    <div>\n      <p>".concat(e,"</p>\n      <span>[").concat(i,", ").concat(n,"]</span>\n    </div>\n    ")}}]),e}())).init();i(814)}()}();